<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      console.log('hi');

      function formatNumberWithCommasAndDecimals(number) {
        // 1000단위에 , 를 추가하고 소수점 첫 번째 자리까지 보이도록 포맷팅
        return number.toLocaleString(undefined, {
          minimumFractionDigits: 1,
          maximumFractionDigits: 1,
        });
      }

      function calculateReturnRate(totalPurchaseAmount, totalPrizeAmount) {
        // 100 - ((구매가격 - 당첨금액) / 구매가격) * 100
        const totalProfit = totalPurchaseAmount - totalPrizeAmount;
        const totalPuchaseRate = totalProfit / totalPurchaseAmount;
        const totalReturnRate = Math.abs(1 - totalPuchaseRate);
        const rate = totalReturnRate * 100;
        const formattedRate = formatNumberWithCommasAndDecimals(rate);
        console.log(totalReturnRate, formattedRate);
        printTotalReturnRate(formattedRate);
      }

      const printTotalReturnRate = (rate) => console.log(`총 수익률은 ${rate}%입니다.`);

      calculateReturnRate(8000, 5000);
      calculateReturnRate(1000, 2000000000);

      // ~~~~~
      // import AppError from './errors/error.js';
      // import { Console } from '@woowacourse/mission-utils';
      // import ERROR from './constants/error.js';
      // import LOTTO from './constants/lotto.js';
      // import Lotto from './Domain/Lotto.js';
      // import MESSAGE from './constants/message.js';
      // import { MessageFormat } from './utils/messageFormat.js';
      // import { isValidNumber } from './utils/index';

      // class App {
      //   #lotto;

      //   constructor() {
      //     this.amount = 0;
      //   }

      //   async play() {
      //     try {
      //       this.amount = await this.inputUserPurchaseAmount();
      //       // // const ticketCount = App.calculateTicketCountFromAmount(this.amount);
      //       // const lottoTickets = this.purchaseLotto(this.amount);
      //       const ticketCount = App.calculateTicketCountFromAmount(this.amount);
      //       const lottoTickets = this.purchaseLotto(ticketCount);

      //       // 6. (출력) 당첨 내역 출력
      //       const userLotto = await this.inputUserLotto();
      //       this.#lotto = new Lotto(userLotto.winningNumbers.split(',').map(Number));
      //       this.#lotto.compareWinningAndLotto(userLotto, lottoTickets);
      //       this.#lotto.printTotalResult();

      //       this.resultReturnRate();
      //     } catch (error) {
      //       Console.print(`"play" ${error.message}`);
      //     }
      //   }

      //   /**
      //    * 1. (입력) 로또 구입 금액 입력
      //    */

      //   async inputUserPurchaseAmount() {
      //     while (true) {
      //       try {
      //         const amount = await Console.readLineAsync(MESSAGE.input.PurchaseAmount);
      //         return App.validateNumericAmount(amount);
      //       } catch (error) {
      //         Console.print(`"inputUserPurchaseAmount" ${error.message}`);
      //       }
      //     }
      //   }

      //   // async inputUserPurchaseAmount() {
      //   //   while (true) {
      //   //     try {
      //   //       const amount = await Console.readLineAsync(MESSAGE.input.PurchaseAmount);
      //   //       return App.validates(amount);
      //   //     } catch (error) {
      //   //       Console.print(`${error.message}`);
      //   //     }
      //   //   }
      //   // }
      //   // static validates(amount) {
      //   //   let result = null;
      //   //   const numericPattern = /^(?:[1-9]\d{3,}|[1-9]\d{0,2}(,\d{3})+)$/;
      //   //   if (!numericPattern.test(amount)) {
      //   //     throw new AppError(ERROR.message.invalidPurchase);
      //   //   }
      //   //   result = parseInt(amount.replace(/,/g, ''), 10);

      //   //   if (result % LOTTO.unit.unit) {
      //   //     throw new AppError(ERROR.message.invalidUnit);
      //   //   }
      //   //   result = result / LOTTO.unit.unit;

      //   //   return result;
      //   // }

      //   /**
      //    * 1.1. 문자가 포함되는 경우 걸러낸다.
      //    */
      //   static validateNumericAmount(amount) {
      //     const numericPattern = /^(?:[1-9]\d{3,}|[1-9]\d{0,2}(,\d{3})+)$/;
      //     if (!numericPattern.test(amount)) {
      //       throw new AppError(ERROR.message.invalidPurchase);
      //     }
      //     // return parseInt(amount.replace(/,/g, ''), 10);
      //     return amount;
      //   }

      //   /**
      //    * 1.2. 1000단위 이상의 숫자를 받아서 티켓의 갯수를 알려준다.
      //    */
      //   static calculateTicketCountFromAmount(validatedAmount) {
      //     if (validatedAmount % LOTTO.unit.unit) {
      //       throw new AppError(ERROR.message.invalidUnit);
      //     }
      //     return validatedAmount / LOTTO.unit.unit;
      //   }

      //   /**
      //    * 2. (출력) 로또 구매
      //    * - 입력한 금액에 따른 구매 갯수와 구매한 로또 번호 출력.
      //    */
      //   purchaseLotto(ticketCount) {
      //     this.printPurchaseConfirm(ticketCount);
      //     return this.purchaseLottoTickets(ticketCount);
      //   }

      //   /**
      //    * 2.1. 입력한 금액에 따른 구매 갯수
      //    */
      //   printPurchaseConfirm(ticketCount) {
      //     Console.print(MessageFormat.purchaseConfirm(ticketCount));
      //   }

      //   /**
      //    * 2.2 (출력) 구매 갯수만큼 로또 번호 출력
      //    */
      //   purchaseLottoTickets(ticketCount) {
      //     const lottoTickets = Lotto.generateLottoTickets(ticketCount);
      //     lottoTickets.forEach((ticket) => this.printLottoTickets(ticket));
      //     return lottoTickets;
      //   }

      //   printLottoTickets(ticket) {
      //     Console.print(`[${ticket.join(', ')}]`);
      //   }

      //   /**
      //    * 3. (입력)
      //    * -  당첨 번호 6개와 보너스 번호 입력 받기
      //    */

      //   async inputUserLotto() {
      //     while (true) {
      //       try {
      //         // 3.1 winningNumbers
      //         const winningNumbers = await Console.readLineAsync(MESSAGE.input.WinningNumbers);
      //         const splitedWinningNumbers = winningNumbers.split(',');
      //         const winningNumbersSet = new Set(splitedWinningNumbers.map(Number));
      //         const hasWhiteSpace = /\s/.test(splitedWinningNumbers);

      //         // 3.1.1 (예외) 6개 이하
      //         if (splitedWinningNumbers.length !== 6) {
      //           throw new AppError(ERROR.message.invalidNumberLimit);
      //         }

      //         // 3.1.2 (예외) 빈 문자열
      //         if (hasWhiteSpace) {
      //           throw new AppError(ERROR.message.invalidEmpty);
      //         }

      //         // 3.1.3 (예외) 중복인 경우
      //         if (winningNumbersSet.size !== 6) {
      //           throw new AppError(ERROR.message.duplicateNumber);
      //         }

      //         // 3.1.4 (예외) 1~45 사이

      //         if (![...winningNumbersSet].every(isValidNumber)) {
      //           throw new AppError(ERROR.message.invalidNumberRange);
      //         }

      //         // // 3.1.5 (예외) ,, 이 중복으로 들어간 경우 : 1,2,,3,4,5 -> 0으로 처리함
      //         if (winningNumbersSet.has(0)) {
      //           throw new AppError(ERROR.message.noZero);
      //         }

      //         // 3.2 bonusNumber
      //         const inputbonusNumber = await Console.readLineAsync(MESSAGE.input.BonusNumbers);
      //         const bonusNumber = Number(inputbonusNumber);

      //         if (inputbonusNumber.includes(',') || inputbonusNumber.includes(' ')) {
      //           throw new AppError('[ERROR] 공백 혹은 쉼표가 포함되어 있습니다.');
      //         }

      //         // 숫자가 아니거나 범위를 벗어나는지 확인
      //         if (!isValidNumber(bonusNumber)) {
      //           throw new Error('보너스 숫자는 1~45 사이의 값이어야 합니다.');
      //         }

      //         // 3.2.2 보너스 번호와 당첨 번호 중복
      //         if (winningNumbersSet.has(bonusNumber)) {
      //           throw new AppError(ERROR.message.duplicateBonusNumber);
      //         }

      //         const userLotto = {
      //           winningNumbers,
      //           bonusNumber,
      //         };

      //         return userLotto;
      //       } catch (error) {
      //         Console.print(`${error.message}`); // 에러 메시지 출력
      //       }
      //     }
      //   }

      //   /**
      //    * 4. 수익률
      //    */
      //   resultReturnRate() {
      //     this.#lotto.calculateReturnRate(this.amount);
      //   }
      // }

      // export default App;

      //////////////
      // import { Console } from '@woowacourse/mission-utils';
      // import ExceptionHandler from './utils/ExceptionHandler.js';
      // import LOTTO from './constants/lotto.js';
      // import Lotto from './Domain/Lotto.js';
      // import LottoNumberCreation from './Domain/LottoNumberCreation.js';
      // import MESSAGE from './constants/message.js';
      // import { MessageFormat } from './utils/messageFormat.js';

      // class App {
      //   #lotto;
      //   #winningNumbers;
      //   #bonusNumber;

      //   constructor() {
      //     this.validatedAmount = 0;
      //   }

      //   async play() {
      //     try {
      //       /**
      //        * 1. (입력) 로또 구입 금액 입력과 구매
      //        */
      //       const purchaseAmount = await this.inputUserPurchaseAmount();
      //       const lottoTickets = this.purchaseLotto(purchaseAmount);

      //       /**
      //        * 6. (출력) 당첨 내역 출력
      //        */
      //       await this.inputUserWinningNumbers();
      //       await this.inputUserBonusNumber();

      //       this.#lotto = new Lotto(this.#winningNumbers.split(',').map(Number));
      //       this.#lotto.compareWinningAndLotto(this.#bonusNumber, lottoTickets);
      //       this.#lotto.printTotalResult();

      //       this.resultReturnRate();
      //     } catch (error) {
      //       Console.print(`${error.message}`);
      //     }
      //   }

      //   /**
      //    * 1. (입력) 로또 구입 금액 입력
      //    */
      //   async inputUserPurchaseAmount() {
      //     while (true) {
      //       try {
      //         const amount = await Console.readLineAsync(MESSAGE.input.PurchaseAmount);
      //         this.validatedAmount = ExceptionHandler.validateAmount(amount);
      //         return this.calculateTicketCountFromAmount(this.validatedAmount);
      //       } catch (error) {
      //         Console.print(`${error.message}`);
      //       }
      //     }
      //   }

      //   calculateTicketCountFromAmount(validatedAmount) {
      //     return validatedAmount / LOTTO.unit.unit;
      //   }

      //   /**
      //    * 2. (출력) 로또 구매
      //    * - 입력한 금액에 따른 구매 갯수와 구매한 로또 번호 출력.
      //    */
      //   purchaseLotto(ticketCount) {
      //     this.printPurchaseConfirm(ticketCount);
      //     return this.purchaseLottoTickets(ticketCount);
      //   }

      //   /**
      //    * 2.1. 입력한 금액에 따른 구매 갯수
      //    */
      //   printPurchaseConfirm(ticketCount) {
      //     Console.print(MessageFormat.purchaseConfirm(ticketCount));
      //   }

      //   /**
      //    * 2.2 (출력) 구매 갯수만큼 로또 번호 출력
      //    */
      //   purchaseLottoTickets(ticketCount) {
      //     const lottoTickets = LottoNumberCreation.generateLottoTickets(ticketCount);
      //     lottoTickets.forEach((ticket) => this.printLottoTickets(ticket));

      //     return lottoTickets;
      //   }

      //   printLottoTickets(ticket) {
      //     Console.print(`[${ticket.join(', ')}]`);
      //   }

      //   /**
      //    * 3. (입력)
      //    * -  당첨 번호 6개와 보너스 번호 입력 받기
      //    */
      //   async inputUserWinningNumbers() {
      //     while (true) {
      //       try {
      //         this.#winningNumbers = await this.getWinningNumberInput();
      //         break;
      //       } catch (error) {
      //         Console.print(`${error.message}`);
      //       }
      //     }
      //   }

      //   async inputUserBonusNumber() {
      //     while (true) {
      //       try {
      //         this.#bonusNumber = await this.getBonusNumberInput();
      //         break;
      //       } catch (error) {
      //         Console.print(`${error.message}`);
      //       }
      //     }
      //   }

      //   async getWinningNumberInput() {
      //     const inputWinningNumbers = await Console.readLineAsync(MESSAGE.input.WinningNumbers);
      //     return ExceptionHandler.validateWinningNumbers(inputWinningNumbers);
      //   }

      //   async getBonusNumberInput() {
      //     const inputBonusNumber = await Console.readLineAsync(MESSAGE.input.BonusNumbers);
      //     return ExceptionHandler.validateBonusNumber(inputBonusNumber, this.#winningNumbers);
      //   }

      //   /**
      //    * 4. 수익률
      //    */
      //   resultReturnRate() {
      //     this.#lotto.calculateReturnRate(this.validatedAmount);
      //   }
      // }

      // export default App;
    </script>
  </body>
</html>
